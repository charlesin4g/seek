# 数据库迁移方案

## 现状
- 客户端新增本地库（SQLite/SQLCipher），与后端无直接冲突；

## 客户端本地库版本
- 初始版本：v1，表 `ticket`、`station`、`change_log`；
- 迁移策略：`onUpgrade` 有序执行 SQL；

## 服务器侧（如需）
- 若需要支持离线冲突下的手动合并接口，新增 API：
  - `POST /api/sync/resolve`；
  - 语义：提交客户端合并决策；

## 回滚策略
- 客户端：保留本地库备份文件；
- 服务器：保留最近同步批次的日志与影子表（可选）；